<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Projects – Nana Chang</title>
  <link rel="stylesheet" href="styles.css" />
  <style>
    body {
      background: #fff;
      color: #222;
      margin-bottom: 110px; /* ensure space for sticky bar */
    }
    .project-gallery-bar {
      display: flex;
      flex-direction: row;
      overflow-x: auto;
      gap: 1.2rem;
      padding: 0.4rem 0 0.4rem 0;
      background: #f8f8f8;
      border-top: 1px solid #e0e0e0;
      position: fixed;
      left: 0;
      right: 0;
      bottom: 0;
      z-index: 50;
      min-height: 54px;
      transition: min-height 0.3s, box-shadow 0.3s;
      box-shadow: 0 -2px 8px #eee;
    }
    .project-gallery-bar.expanded {
      min-height: 110px;
      box-shadow: 0 -5px 24px #1DCD9F2a;
    }
    .project-thumb {
      min-width: 110px;
      max-width: 140px;
      background: transparent;
      border-radius: 14px;
      transition: background 0.2s, box-shadow 0.2s, transform 0.2s;
      cursor: pointer;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding-bottom: 0.5rem;
      border: 2px solid transparent;
      box-shadow: none;
      margin: 0.3em 0;
      justify-content: flex-end;
    }
    .project-thumb.selected, .project-thumb:focus, .project-thumb:hover {
      border-color: #1DCD9F;
      transform: translateY(-3px) scale(1.04);
      background: #fff;
      box-shadow: 0 4px 16px #1DCD9F1a;
    }
    .project-thumb-img {
      width: 60px;
      height: 60px;
      object-fit: cover;
      border-radius: 10px;
      background: #fff;
      margin-bottom: 0.2rem;
      margin-top: 0.2rem;
      opacity: 1;
      transition: opacity 0.2s;
      display: block;
    }
    .project-gallery-bar:not(.expanded) .project-thumb-img {
      opacity: 0;
      height: 0;
      width: 0;
      margin: 0;
      pointer-events: none;
    }
    .project-thumb-title {
      font-weight: bold;
      font-size: 0.85em;
      color: #1DCD9F;
      text-align: center;
      margin: 0.1em 0 0.1em 0;
      letter-spacing: 0.01em;
      background: transparent;
      border-radius: 6px;
      padding: 0.1em 0.3em;
      transition: background 0.2s;
      z-index: 2;
    }
    /* Optional: subtle highlight when bar is expanded */
    .project-gallery-bar.expanded .project-thumb-title {
      background: rgba(255,255,255,0.75);
    }
    @media (max-width: 700px) {
      .project-thumb-img {
        width: 38px;
        height: 38px;
      }
      .project-thumb {
        min-width: 60px;
        max-width: 80px;
      }
      .project-gallery-bar.expanded {
        min-height: 60px;
      }
    }
    /* project detail section... unchanged from before */
    .project-detail-top {
      background: #fff;
      max-width: 900px;
      margin: 2em auto 2em auto;
      border-radius: 18px;
      box-shadow: 0 2px 8px #eee;
      padding: 2em;
      display: flex;
      gap: 2em;
      align-items: flex-start;
      min-height: 350px;
      position: relative;
    }
    .project-detail-imgs {
      flex: 0 0 340px;
      display: flex;
      flex-direction: column;
      gap: 1em;
      justify-content: flex-start;
    }
    .project-detail-imgs img {
      width: 220px;
      height: 150px;
      object-fit: cover;
      border-radius: 12px;
      box-shadow: 0 2px 8px #ddd;
    }
    .project-detail-content {
      flex: 1;
      min-width: 180px;
    }
    .project-detail-title {
      font-size: 2em;
      font-weight: 700;
      color: #1DCD9F;
      margin-bottom: 0.4em;
    }
    .project-detail-date {
      color: #888;
      margin-bottom: 1em;
      font-style: italic;
    }
    .project-detail-section {
      margin-bottom: 1.2em;
    }
    .project-detail-section h4 {
      color: #005599;
      margin-bottom: 0.3em;
    }
    .project-detail-section ul {
      padding-left: 1.1em;
    }
  </style>
</head>
<body>
  <header class="text-center py-4">
    <h1 class="fw-bold" style="color: #1DCD9F;">Projects</h1>
    <p class="lead mb-0">Hover your mouse over the bottom 1/5 of the screen to see project images. Click a project to view details above.</p>
  </header>

  <!-- Top detail section -->
  <div id="project-detail-anchor"></div>
  <div id="project-detail" class="project-detail-top">
    <!-- Populated by JS -->
  </div>

  <!-- Gallery bar (scrollable, sticky) -->
  <div class="project-gallery-bar" id="project-gallery-bar">
    <!-- Populated by JS -->
  </div>

  <script>
    // ---- PROJECT DATA (same as before, shortened here for brevity!) ----
    const projects = [
      {
        key: "eeg-robot",
        title: "EEG Controlled Bipedal Robot",
        date: "9/2024 – Present",
        images: ["assets/eeg_robot1.jpg", "assets/eeg_robot2.jpg"],
        goal: "Integrate EEG signals with a deep learning model for movement classification and precise motor control.",
        achievements: [
          "Optimized robot structure with CAD design through SolidWorks for enhanced stability and mobility.",
          "3D printed components for prototyping.",
          "PCB design for the overcurrent protection circuit, ensuring reliable power management."
        ]
      },
      {
        key: "resin-bone",
        title: "3D Resin Printing of Trabecular Bone Structures",
        date: "4/2024 – 8/2024",
        images: ["assets/boneprint1.jpg", "assets/boneprint2.jpg"],
        goal: "Develop a reliable method to resin 3D print trabecular bone structures for future mechanical testing.",
        achievements: [
          "Processed microCT data and created printable STL models using SolidWorks and AnyCubic software.",
          "Optimized resin print parameters to improve structural fidelity across bone types.",
          "Demonstrated high geometric fidelity through image registration and voxel-wise analysis."
        ]
      }
      // ... add other projects here ...
    ];

    // ---- RENDER PROJECT DETAIL ----
    function renderProjectDetail(idx) {
      const prj = projects[idx];
      if (!prj) return;
      let imgs = '';
      if (prj.images && prj.images.length > 0) {
        imgs = prj.images.map(img =>
          `<img src="${img}" alt="${prj.title} image" />`
        ).join('');
      }
      document.getElementById('project-detail').innerHTML = `
        <div class="project-detail-imgs">${imgs}</div>
        <div class="project-detail-content">
          <div class="project-detail-title">${prj.title}</div>
          <div class="project-detail-date">${prj.date}</div>
          <div class="project-detail-section">
            <h4>Project Goal</h4>
            <p>${prj.goal}</p>
          </div>
          <div class="project-detail-section">
            <h4>Key Achievements</h4>
            <ul>${prj.achievements.map(item => `<li>${item}</li>`).join('')}</ul>
          </div>
        </div>
      `;
      // highlight selected
      document.querySelectorAll('.project-thumb').forEach((el, i) => {
        if (i === idx) el.classList.add('selected');
        else el.classList.remove('selected');
      });
      // Scroll to detail anchor on mobile
      if(window.innerWidth < 800) {
        document.getElementById('project-detail-anchor').scrollIntoView({behavior: 'smooth'});
      }
    }

    // ---- RENDER PROJECT GALLERY ----
    function renderProjectGallery(selectedIdx=0) {
      const gallery = document.getElementById('project-gallery-bar');
      gallery.innerHTML = '';
      projects.forEach((prj, idx) => {
        const thumb = document.createElement('div');
        thumb.className = 'project-thumb' + (idx===selectedIdx?' selected':'');
        thumb.tabIndex = 0;
        thumb.innerHTML = `
          <img class="project-thumb-img" src="${prj.images[0]}" alt="${prj.title} thumbnail"/>
          <div class="project-thumb-title">${prj.title}</div>
        `;
        thumb.onclick = () => {
          renderProjectDetail(idx);
        };
        thumb.onkeydown = (e) => {
          if (e.key === 'Enter' || e.key === ' ') {
            renderProjectDetail(idx);
          }
        };
        gallery.appendChild(thumb);
      });
    }

    // ---- POPUP BEHAVIOR ----
    // Show gallery bar as "expanded" when mouse in bottom 1/5 of screen
    let isExpanded = false;
    function checkExpandBar(e) {
      const vh = window.innerHeight;
      if (e.clientY > vh * 0.8) {
        if (!isExpanded) {
          isExpanded = true;
          document.getElementById('project-gallery-bar').classList.add('expanded');
        }
      } else {
        if (isExpanded) {
          isExpanded = false;
          document.getElementById('project-gallery-bar').classList.remove('expanded');
        }
      }
    }
    // Only trigger on desktop
    if(window.matchMedia("(pointer: fine)").matches){
      document.addEventListener('mousemove', checkExpandBar);
    } else {
      // Always expanded on touch devices
      document.getElementById('project-gallery-bar').classList.add('expanded');
    }

    // ---- INIT PAGE ----
    renderProjectDetail(0);
    renderProjectGallery(0);
  </script>
</body>
</html>